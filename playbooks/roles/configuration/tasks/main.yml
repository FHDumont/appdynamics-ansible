---
# tasks file for configuration

- name: Controller URL must be provided
  fail:
    msg: "The variable 'controller_host_name' is empty"
  when: (controller_host_name is not defined) or (controller_host_name|length == 0)

- name: Token value must be provided
  fail:
    msg: "The variable 'controller_access_token' is empty"
  when: (controller_access_token is not defined) or (controller_access_token|length == 0)

- name: Include import health rules tasks
  include_tasks: import_health_rules.yml
  vars:
    hierarchy_item: "{{ outer_item }}"
  with_items: "{{ health_rule_hierarchy }}"
  loop_control:
    loop_var: outer_item